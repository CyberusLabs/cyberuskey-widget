!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cyberuskey-widget",[],t):"object"==typeof exports?exports["cyberuskey-widget"]=t():e["cyberuskey-widget"]=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e[void 0]=1]="undefined",e[e.unknown_error=2]="unknown_error",e[e.server_error=3]="server_error",e[e.wrong_json=4]="wrong_json",e[e.openapi_error=5]="openapi_error",e[e.resource_not_found=6]="resource_not_found",e[e.otp_generation_failure=7]="otp_generation_failure",e[e.invalid_redirect_uri=8]="invalid_redirect_uri",e[e.invalid_client=9]="invalid_client",e[e.too_many_calls_error=10]="too_many_calls_error"}(r||(r={})),t.ErrorCode=r;class i extends Error{constructor(e,t){super(t),this._code=r[e]}get code(){return r[this._code]}get description(){return this.message}}t.CyberusKeyError=i;class o extends i{constructor(e="unknown_error",t="Unknown error occured."){super(e,t)}}t.UnknownError=o;class s extends i{constructor(e="too_many_calls_error",t="You've done too many calls."){super(e,t)}}t.TooManyCallsError=s;t.MissingRedirectUri=class extends i{constructor(){super("invalid_redirect_uri","Missing redirection URI.")}};class a extends i{}t.WrongJsonError=a;class c extends i{}t.OpenApiError=c;class u extends i{}t.ResourceNotFoundError=u;class l extends i{}t.OTPGenerationError=l;const h={[r.undefined]:o,[r.unknown_error]:o,[r.server_error]:o,[r.undefined]:a,[r.wrong_json]:a,[r.openapi_error]:c,[r.resource_not_found]:u,[r.otp_generation_failure]:l,[r.invalid_redirect_uri]:class extends i{},[r.invalid_client]:class extends i{},[r.too_many_calls_error]:s};t.errorFactory=function(e,t){const n=r[e];return new(0,h[n])(e,t)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(10)),r(n(0)),r(n(11)),r(n(12)),r(n(3)),r(n(4)),r(n(13));const i=n(2);t.default=i.CyberusKeyAPI},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);let s=null;t.CyberusKeyAPI=class{constructor(e,t){this._apiUrl=new URL("/api/v2/",e),this._geoProvider=t}createSession(e,t){return r(this,void 0,void 0,function*(){this._raiseWhenCalledTooManyTimes(s);const n={client_id:e};t&&(n.lat=t.latitude,n.lng=t.longitude);const r=yield fetch(this._getUrl("sessions"),{method:"POST",body:this._getUrlEncodedBody(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=yield r.json();if(s=this._timestamp(),r.ok&&201===r.status&&a.success)return new o.Session(a.data);if(!a.error)throw new i.UnknownError;throw i.errorFactory(a.error,a.error_description)})}getOTPSound(e){return r(this,void 0,void 0,function*(){const t=yield fetch(this._getUrl(`sessions/${e.sessionId}`),{headers:{Accept:"audio/mpeg","Content-Type":"text/plain"}}),n=t.buffer||t.arrayBuffer;return yield n.call(t)})}getAuthenticationEndpointUrl(e,t,n,r,i,o){const s={session_id:e.sessionId,client_id:n,scope:t.getValue(),redirect_uri:r,response_type:"code"};i&&(s.state=i),o&&(s.nonce=o);const a=new URL(this._getUrl("authenticate"));return Object.keys(s).forEach(e=>{a.searchParams.append(e,s[e])}),a.href}authenticate(e,t,n,i,o,s,a){return r(this,void 0,void 0,function*(){this._geoProvider&&!this._cachedGeo&&(this._cachedGeo=yield this._geoProvider.getGeo());const r=yield this.createSession(e,this._cachedGeo),c=yield this.getOTPSound(r),u=this.getAuthenticationEndpointUrl(r,n,e,t,s,a);console.info(`Navigating to ${u}.`),yield o.navigate(u),yield this._timeout(1e3),console.info("Sound emitting."),yield i.emit(c)})}_getUrl(e){return new URL(e,this._apiUrl).href}_timestamp(){return(new Date).getTime()}_raiseWhenCalledTooManyTimes(e){if(e&&this._timestamp()-e<1e4)throw new i.TooManyCallsError}_getUrlEncodedBody(e){return Object.keys(e).reduce((t,n)=>{const r=encodeURIComponent(n),i=encodeURIComponent(e[n]);return t.push(`${r}=${i}`),t},[]).join("&")}_timeout(e){return new Promise(t=>setTimeout(t,e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Session=class{constructor(e){this.sessionId=e.session_id,this.createdAt=new Date(e.created_at)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Geolocation=class{constructor(e,t,n){this._latitude=e,this._longitude=t,this._accuracy=n}get latitude(){return this._latitude}get longitude(){return this._longitude}get accuracy(){return this._accuracy}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(6);const i=n(1),o=n(14),s=n(15),a={default:"img/cyberus/cyberus_login_widget.png",eliot:"img/eliot/eliot_login_widget_button.png"};!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1));t.CyberusKeyWidget=class{constructor(e="default",t="https://auth-server-demo.cyberuslabs.net"){if(!Object.keys(a).includes(e))throw new Error(`Theme "${e}" is not supported.`);this._serverUrl=new URL(t),this._theme=e,this._initialized=!1,this._inProgress=!1}create(e,t,n,r,i,c){if(this._initialized)throw new Error("Widget is already initialized.");this._clientId=t,this._redirectUri=n,this._geoProvider=r,this._state=i,this._nonce=c;const u=s.replace("{{widgetImageUrl}}",this._getUrl(a[this._theme]));o(u).appendTo(e).on("click",this._loginButtonClick.bind(this)),this._initialized=!0}_loginButtonClick(){return r(this,void 0,void 0,function*(){if(this._inProgress)return Promise.resolve();this._inProgress=!0;const e=new i.CyberusKeyAPI(this._serverUrl.href,this._geoProvider),t=(new i.OpenIdScopeParser).addEmail().addProfile();try{yield e.authenticate(this._clientId,this._redirectUri,t,new i.WebAudioSoundEmitter,new i.RedirectNavigator,this._state,this._nonce)}catch(e){throw this._inProgress=!1,e}})}_getUrl(e){return new URL(e,this._serverUrl).href}}},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(9)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,".cyberus-key-widget{position:relative}.cyberus-key-widget .login-button{flex:1 1 auto;padding:0px;border-style:none;outline:none;cursor:pointer;background-color:transparent;text-align:center}.cyberus-key-widget .login-button img{max-width:500px}.cyberus-key-widget .lost-phone{flex:0 0 auto;margin-top:3px;text-align:center;color:#7e8aac;font-size:18px;font-weight:400;letter-spacing:-0.32px;line-height:52.8px}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")});return[n].concat(o).concat([i]).join("\n")}var s,a,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var s=0;s<e.length;s++){var a=e[s];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="(".concat(a[2],") and (").concat(n,")")),t.push(a))}},t}},function(e,t,n){"use strict";var r,i={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function a(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function c(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],t))}else{for(var a=[];s<r.parts.length;s++)a.push(y(r.parts[s],t));i[r.id]={id:r.id,refs:1,parts:a}}}}function u(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach(function(n){t.setAttribute(n,e.attributes[n])}),"function"==typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,v=0;function y(e,t){var n,r,i;if(t.singleton){var o=v++;n=d||(d=u(t)),r=p.bind(null,n,o,!1),i=p.bind(null,n,o,!0)}else n=u(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=a(e,t);return c(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var s=n[o],u=i[s.id];u&&(u.refs--,r.push(u))}e&&c(a(e,t),t);for(var l=0;l<r.length;l++){var h=r[l];if(0===h.refs){for(var p=0;p<h.parts.length;p++)h.parts[p]();delete i[h.id]}}}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});t.WebAudioSoundEmitter=class{emit(e){return r(this,void 0,void 0,function*(){let t;try{t=new AudioContext}catch(e){throw console.error("AudioContext is not supported."),e}const n=yield t.decodeAudioData(e),r=t.createBufferSource();r.buffer=n,r.connect(t.destination),yield new Promise(e=>{r.onended=e,r.start(0)})})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.RedirectNavigator=class{navigate(e){return r(this,void 0,void 0,function*(){if(!e)throw new i.MissingRedirectUri;return window.location.href=e,Promise.resolve()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OpenIdScopeParser=class{constructor(){this._scope=["openid"]}addEmail(){return this._scope.includes("email")?this:(this._scope.push("email"),this)}addProfile(){return this._scope.includes("profile")?this:(this._scope.push("profile"),this)}getValue(){return this._scope.join(" ")}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4);t.HTML5GeoProvider=class{getGeo(){return r(this,void 0,void 0,function*(){const{coords:e}=yield this._getGeo();return new i.Geolocation(e.latitude,e.longitude,e.accuracy)})}_getGeo(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0})})}}},function(module,exports,__webpack_require__){!function(){"use strict";var doc=document,win=window,div=doc.createElement("div"),_a=Array.prototype,filter=_a.filter,indexOf=_a.indexOf,map=_a.map,push=_a.push,reverse=_a.reverse,slice=_a.slice,some=_a.some,splice=_a.splice,idRe=/^#[\w-]*$/,classRe=/^\.[\w-]*$/,htmlRe=/<.+>/,tagRe=/^\w+$/;function find(e,t){return void 0===t&&(t=doc),isDocument(t)||isElement(t)?classRe.test(e)?t.getElementsByClassName(e.slice(1)):tagRe.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e):[]}var Cash=function(){function e(e,t){if(void 0===t&&(t=doc),e){if(isCash(e))return e;var n=e;if(isString(e)){var r=isCash(t)?t[0]:t;if(!(n=idRe.test(e)?r.getElementById(e.slice(1)):htmlRe.test(e)?parseHTML(e):find(e,r)))return}else if(isFunction(e))return this.ready(e);(n.nodeType||n===win)&&(n=[n]),this.length=n.length;for(var i=0,o=this.length;i<o;i++)this[i]=n[i]}}return e.prototype.init=function(t,n){return new e(t,n)},e}(),cash=Cash.prototype.init;cash.fn=cash.prototype=Cash.prototype,Cash.prototype.length=0,Cash.prototype.splice=splice,"function"==typeof Symbol&&(Cash.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]),Cash.prototype.get=function(e){return void 0===e?slice.call(this):this[e<0?e+this.length:e]},Cash.prototype.eq=function(e){return cash(this.get(e))},Cash.prototype.first=function(){return this.eq(0)},Cash.prototype.last=function(){return this.eq(-1)},Cash.prototype.map=function(e){return cash(map.call(this,function(t,n){return e.call(t,n,t)}))},Cash.prototype.slice=function(){return cash(slice.apply(this,arguments))};var dashAlphaRe=/-([a-z])/g;function camelCaseReplace(e,t){return t.toUpperCase()}function camelCase(e){return e.replace(dashAlphaRe,camelCaseReplace)}function each(e,t){for(var n=0,r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);}function extend(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=arguments,i=r.length,o=i<2?0:1;o<i;o++)for(var s in r[o])e[s]=r[o][s];return e}function matches(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function pluck(e,t,n){for(var r=[],i=0,o=e.length;i<o;i++)for(var s=e[i][t];null!=s&&(r.push(s),n);)s=s[t];return r}function isCash(e){return e instanceof Cash}function isWindow(e){return!!e&&e===e.window}function isDocument(e){return!!e&&9===e.nodeType}function isElement(e){return!!e&&1===e.nodeType}function isFunction(e){return"function"==typeof e}function isString(e){return"string"==typeof e}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}cash.camelCase=camelCase,cash.each=each,Cash.prototype.each=function(e){return each(this,e),this},Cash.prototype.removeProp=function(e){return this.each(function(t,n){delete n[e]})},Cash.prototype.extend=function(e){return extend(cash.fn,e)},cash.extend=extend,cash.guid=1,cash.matches=matches;var isArray=Array.isArray;function getCompareFunction(e){return isString(e)?function(t,n){return matches(n,e)}:isFunction(e)?e:isCash(e)?function(t,n){return e.is(n)}:function(t,n){return n===e}}function filtered(e,t){return t&&e.length?e.filter(t):e}cash.isWindow=isWindow,cash.isFunction=isFunction,cash.isString=isString,cash.isNumeric=isNumeric,cash.isArray=isArray,Cash.prototype.prop=function(e,t){if(e){if(isString(e))return arguments.length<2?this[0]&&this[0][e]:this.each(function(n,r){r[e]=t});for(var n in e)this.prop(n,e[n]);return this}},Cash.prototype.filter=function(e){if(!e)return cash();var t=getCompareFunction(e);return cash(filter.call(this,function(e,n){return t.call(e,n,e)}))};var splitValuesRe=/\S+/g;function getSplitValues(e){return isString(e)&&e.match(splitValuesRe)||[]}function attr(e,t){if(e){if(isString(e)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(e);return null===n?void 0:n}return void 0===t?this:null===t?this.removeAttr(e):this.each(function(n,r){r.setAttribute(e,t)})}for(var r in e)this.attr(r,e[r]);return this}}function unique(e){return e.length>1?filter.call(e,function(e,t,n){return indexOf.call(n,e)===t}):e}function computeStyle(e,t,n){if(isElement(e)&&t){var r=win.getComputedStyle(e,null);return t?n?r.getPropertyValue(t)||void 0:r[t]:r}}function computeStyleInt(e,t){return parseInt(computeStyle(e,t),10)||0}Cash.prototype.hasClass=function(e){return e&&some.call(this,function(t){return t.classList.contains(e)})},Cash.prototype.removeAttr=function(e){var t=getSplitValues(e);return t.length?this.each(function(e,n){each(t,function(e,t){n.removeAttribute(t)})}):this},Cash.prototype.attr=attr,Cash.prototype.toggleClass=function(e,t){var n=getSplitValues(e),r=void 0!==t;return n.length?this.each(function(e,i){each(n,function(e,n){r?t?i.classList.add(n):i.classList.remove(n):i.classList.toggle(n)})}):this},Cash.prototype.addClass=function(e){return this.toggleClass(e,!0)},Cash.prototype.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},cash.unique=unique,Cash.prototype.add=function(e,t){return cash(unique(this.get().concat(cash(e,t).get())))};var cssVariableRe=/^--/;function isCSSVariable(e){return cssVariableRe.test(e)}var prefixedProps={},style=div.style,vendorsPrefixes=["webkit","moz","ms","o"];function getPrefixedProp(e,t){if(void 0===t&&(t=isCSSVariable(e)),t)return e;if(!prefixedProps[e]){var n=camelCase(e),r=""+n.charAt(0).toUpperCase()+n.slice(1);each((n+" "+vendorsPrefixes.join(r+" ")+r).split(" "),function(t,n){if(n in style)return prefixedProps[e]=n,!1})}return prefixedProps[e]}cash.prefixedProp=getPrefixedProp;var numericProps={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function getSuffixedValue(e,t,n){return void 0===n&&(n=isCSSVariable(e)),n||numericProps[e]||!isNumeric(t)?t:t+"px"}function css(e,t){if(isString(e)){var n=isCSSVariable(e);return e=getPrefixedProp(e,n),arguments.length<2?this[0]&&computeStyle(this[0],e,n):e?(t=getSuffixedValue(e,t,n),this.each(function(r,i){isElement(i)&&(n?i.style.setProperty(e,t):i.style[e]=t)})):this}for(var r in e)this.css(r,e[r]);return this}function getData(e,t){var n=e.dataset?e.dataset[t]||e.dataset[camelCase(t)]:e.getAttribute("data-"+t);try{return JSON.parse(n)}catch(e){}return n}function setData(e,t,n){try{n=JSON.stringify(n)}catch(e){}e.dataset?e.dataset[camelCase(t)]=n:e.setAttribute("data-"+t,n)}Cash.prototype.css=css;var dataAttributeRe=/^data-(.+)/;function data(e,t){var n=this;if(!e){if(!this[0])return;var r={};return each(this[0].attributes,function(e,t){var i=t.name.match(dataAttributeRe);i&&(r[i[1]]=n.data(i[1]))}),r}if(isString(e))return void 0===t?this[0]&&getData(this[0],e):this.each(function(n,r){return setData(r,e,t)});for(var i in e)this.data(i,e[i]);return this}function getExtraSpace(e,t){return computeStyleInt(e,"border"+(t?"Left":"Top")+"Width")+computeStyleInt(e,"padding"+(t?"Left":"Top"))+computeStyleInt(e,"padding"+(t?"Right":"Bottom"))+computeStyleInt(e,"border"+(t?"Right":"Bottom")+"Width")}Cash.prototype.data=data,each(["Width","Height"],function(e,t){Cash.prototype["inner"+t]=function(){if(this[0])return isWindow(this[0])?win["inner"+t]:this[0]["client"+t]}}),each(["width","height"],function(e,t){Cash.prototype[t]=function(n){if(!this[0])return void 0===n?void 0:this;if(!arguments.length)return isWindow(this[0])?this[0][camelCase("outer-"+t)]:this[0].getBoundingClientRect()[t]-getExtraSpace(this[0],!e);var r=parseInt(n,10);return this.each(function(n,i){if(isElement(i)){var o=computeStyle(i,"boxSizing");i.style[t]=getSuffixedValue(t,r+("border-box"===o?getExtraSpace(i,!e):0))}})}}),each(["Width","Height"],function(e,t){Cash.prototype["outer"+t]=function(n){if(this[0])return isWindow(this[0])?win["outer"+t]:this[0]["offset"+t]+(n?computeStyleInt(this[0],"margin"+(e?"Top":"Left"))+computeStyleInt(this[0],"margin"+(e?"Bottom":"Right")):0)}});var defaultDisplay={};function getDefaultDisplay(e){if(defaultDisplay[e])return defaultDisplay[e];var t=doc.createElement(e);doc.body.appendChild(t);var n=computeStyle(t,"display");return doc.body.removeChild(t),defaultDisplay[e]="none"!==n?n:"block"}function isHidden(e){return"none"===computeStyle(e,"display")}function hasNamespaces(e,t){return!t||!some.call(t,function(t){return e.indexOf(t)<0})}Cash.prototype.toggle=function(e){return this.each(function(t,n){(void 0!==e?e:isHidden(n))?(n.style.display="",isHidden(n)&&(n.style.display=getDefaultDisplay(n.tagName))):n.style.display="none"})},Cash.prototype.hide=function(){return this.toggle(!1)},Cash.prototype.show=function(){return this.toggle(!0)};var eventsNamespace="__cashEvents",eventsNamespacesSeparator=".",eventsFocus={focus:"focusin",blur:"focusout"},eventsHover={mouseenter:"mouseover",mouseleave:"mouseout"},eventsMouseRe=/^(?:mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function getEventNameBubbling(e){return eventsHover[e]||eventsFocus[e]||e}function getEventsCache(e){return e[eventsNamespace]=e[eventsNamespace]||{}}function addEvent(e,t,n,r,i){i.guid=i.guid||cash.guid++;var o=getEventsCache(e);o[t]=o[t]||[],o[t].push([n,r,i]),e.addEventListener(t,i)}function parseEventName(e){var t=e.split(eventsNamespacesSeparator);return[t[0],t.slice(1).sort()]}function removeEvent(e,t,n,r,i){var o=getEventsCache(e);if(t)o[t]&&(o[t]=o[t].filter(function(o){var s=o[0],a=o[1],c=o[2];if(i&&c.guid!==i.guid||!hasNamespaces(s,n)||r&&r!==a)return!0;e.removeEventListener(t,c)}));else{for(t in o)removeEvent(e,t,n,r,i);delete e[eventsNamespace]}}function on(e,t,n,r){var i=this;if(!isString(e)){for(var o in e)this.on(o,t,e[o]);return this}return isFunction(t)&&(n=t,t=""),each(getSplitValues(e),function(e,o){var s=parseEventName(getEventNameBubbling(o)),a=s[0],c=s[1];i.each(function(e,i){var o=function e(o){if(!o.namespace||hasNamespaces(c,o.namespace.split(eventsNamespacesSeparator))){var s=i;if(t){for(var u=o.target;!matches(u,t);){if(u===i)return;if(!(u=u.parentNode))return}s=u,o.__delegate=!0}o.__delegate&&Object.defineProperty(o,"currentTarget",{configurable:!0,get:function(){return s}});var l=n.call(s,o,o.data);r&&removeEvent(i,a,c,t,e),!1===l&&(o.preventDefault(),o.stopPropagation())}};o.guid=n.guid=n.guid||cash.guid++,addEvent(i,a,c,t,o)})}),this}function one(e,t,n){return this.on(e,t,n,!0)}function getValue(e){return e.multiple?pluck(filter.call(e.options,function(e){return e.selected&&!e.disabled&&!e.parentNode.disabled}),"value"):e.value||""}Cash.prototype.off=function(e,t,n){var r=this;return void 0===e?this.each(function(e,t){return removeEvent(t)}):(isFunction(t)&&(n=t,t=""),each(getSplitValues(e),function(e,i){var o=parseEventName(getEventNameBubbling(i)),s=o[0],a=o[1];r.each(function(e,r){return removeEvent(r,s,a,t,n)})})),this},Cash.prototype.on=on,Cash.prototype.one=one,Cash.prototype.ready=function(e){var t=function(){return e(cash)};return"loading"!==doc.readyState?setTimeout(t):doc.addEventListener("DOMContentLoaded",t),this},Cash.prototype.trigger=function(e,t){var n;if(isString(e)){var r=parseEventName(e),i=r[0],o=r[1],s=eventsMouseRe.test(i)?"MouseEvents":"HTMLEvents";(n=doc.createEvent(s)).initEvent(i,!0,!0),n.namespace=o.join(eventsNamespacesSeparator)}else n=e;n.data=t;var a=n.type in eventsFocus;return this.each(function(e,t){a&&isFunction(t[n.type])?t[n.type]():t.dispatchEvent(n)})};var queryEncodeSpaceRe=/%20/g;function queryEncode(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(queryEncodeSpaceRe,"+")}var skippableRe=/file|reset|submit|button|image/i,checkableRe=/radio|checkbox/i;function val(e){return void 0===e?this[0]&&getValue(this[0]):this.each(function(t,n){if("SELECT"===n.tagName){var r=isArray(e)?e:null===e?[]:[e];each(n.options,function(e,t){t.selected=r.indexOf(t.value)>=0})}else n.value=null===e?"":e})}Cash.prototype.serialize=function(){var e="";return this.each(function(t,n){each(n.elements||[n],function(t,n){if(!(n.disabled||!n.name||"FIELDSET"===n.tagName||skippableRe.test(n.type)||checkableRe.test(n.type)&&!n.checked)){var r=getValue(n);if(void 0!==r)each(isArray(r)?r:[r],function(t,r){e+=queryEncode(n.name,r)})}})}),e.substr(1)},Cash.prototype.val=val,Cash.prototype.clone=function(){return this.map(function(e,t){return t.cloneNode(!0)})},Cash.prototype.detach=function(){return this.each(function(e,t){t.parentNode&&t.parentNode.removeChild(t)})};var fragmentRe=/^\s*<(\w+)[^>]*>/,singleTagRe=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,containers;function initContainers(){if(!containers){var e=doc.createElement("table"),t=doc.createElement("tr");containers={"*":div,tr:doc.createElement("tbody"),td:t,th:t,thead:e,tbody:e,tfoot:e}}}function parseHTML(e){if(initContainers(),!isString(e))return[];if(singleTagRe.test(e))return[doc.createElement(RegExp.$1)];var t=fragmentRe.test(e)&&RegExp.$1,n=containers[t]||containers["*"];return n.innerHTML=e,cash(n.childNodes).detach().get()}function html(e){return void 0===e?this[0]&&this[0].innerHTML:this.each(function(t,n){n.innerHTML=e})}function text(e){return void 0===e?this[0]?this[0].textContent:"":this.each(function(t,n){n.textContent=e})}cash.parseHTML=parseHTML,Cash.prototype.empty=function(){return this.each(function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild)})},Cash.prototype.html=html,Cash.prototype.remove=function(){return this.detach().off()},Cash.prototype.text=text,Cash.prototype.unwrap=function(){return this.parent().each(function(e,t){var n=cash(t);n.replaceWith(n.children())}),this};var docEle=doc.documentElement;Cash.prototype.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+win.pageYOffset-docEle.clientTop,left:t.left+win.pageXOffset-docEle.clientLeft}}},Cash.prototype.offsetParent=function(){return cash(this[0]&&this[0].offsetParent)},Cash.prototype.position=function(){var e=this[0];if(e)return{left:e.offsetLeft,top:e.offsetTop}},Cash.prototype.children=function(e){var t=[];return this.each(function(e,n){push.apply(t,n.children)}),filtered(cash(unique(t)),e)},Cash.prototype.contents=function(){var e=[];return this.each(function(t,n){push.apply(e,"IFRAME"===n.tagName?[n.contentDocument]:n.childNodes)}),cash(unique(e))},Cash.prototype.find=function(e){for(var t=[],n=0,r=this.length;n<r;n++){var i=find(e,this[n]);i.length&&push.apply(t,i)}return cash(unique(t))};var scriptTypeRe=/^$|^module$|\/(?:java|ecma)script/i,HTMLCDATARe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function evalScripts(node){var collection=cash(node);collection.filter("script").add(collection.find("script")).each(function(i,ele){!ele.src&&scriptTypeRe.test(ele.type)&&ele.ownerDocument.documentElement.contains(ele)&&eval(ele.textContent.replace(HTMLCDATARe,""))})}function insertElement(e,t,n,r){n?e.insertBefore(t,r):e.appendChild(t),evalScripts(t)}function insertContent(e,t,n){each(e,function(e,r){each(t,function(t,i){insertElement(r,e?i.cloneNode(!0):i,n,n&&r.firstChild)})})}Cash.prototype.append=function(){var e=this;return each(arguments,function(t,n){insertContent(e,cash(n))}),this},Cash.prototype.appendTo=function(e){return insertContent(cash(e),this),this},Cash.prototype.insertAfter=function(e){var t=this;return cash(e).each(function(e,n){var r=n.parentNode;r&&t.each(function(t,i){insertElement(r,e?i.cloneNode(!0):i,!0,n.nextSibling)})}),this},Cash.prototype.after=function(){var e=this;return each(reverse.apply(arguments),function(t,n){reverse.apply(cash(n).slice()).insertAfter(e)}),this},Cash.prototype.insertBefore=function(e){var t=this;return cash(e).each(function(e,n){var r=n.parentNode;r&&t.each(function(t,i){insertElement(r,e?i.cloneNode(!0):i,!0,n)})}),this},Cash.prototype.before=function(){var e=this;return each(arguments,function(t,n){cash(n).insertBefore(e)}),this},Cash.prototype.prepend=function(){var e=this;return each(arguments,function(t,n){insertContent(e,cash(n),!0)}),this},Cash.prototype.prependTo=function(e){return insertContent(cash(e),reverse.apply(this.slice()),!0),this},Cash.prototype.replaceWith=function(e){return this.before(e).remove()},Cash.prototype.replaceAll=function(e){return cash(e).replaceWith(this),this},Cash.prototype.wrapAll=function(e){if(this[0]){var t=cash(e);this.first().before(t);for(var n=t[0];n.children.length;)n=n.firstElementChild;this.appendTo(n)}return this},Cash.prototype.wrap=function(e){return this.each(function(t,n){var r=cash(e)[0];cash(n).wrapAll(t?r.cloneNode(!0):r)})},Cash.prototype.wrapInner=function(e){return this.each(function(t,n){var r=cash(n),i=r.contents();i.length?i.wrapAll(e):r.append(e)})},Cash.prototype.has=function(e){var t=isString(e)?function(t,n){return!!find(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},Cash.prototype.is=function(e){if(!e||!this[0])return!1;var t=getCompareFunction(e),n=!1;return this.each(function(e,r){return!(n=t.call(r,e,r))}),n},Cash.prototype.next=function(e,t){return filtered(cash(unique(pluck(this,"nextElementSibling",t))),e)},Cash.prototype.nextAll=function(e){return this.next(e,!0)},Cash.prototype.not=function(e){if(!e||!this[0])return this;var t=getCompareFunction(e);return this.filter(function(e,n){return!t.call(n,e,n)})},Cash.prototype.parent=function(e){return filtered(cash(unique(pluck(this,"parentNode"))),e)},Cash.prototype.index=function(e){var t=e?cash(e)[0]:this[0],n=e?this:cash(t).parent().children();return indexOf.call(n,t)},Cash.prototype.closest=function(e){if(!e||!this[0])return cash();var t=this.filter(e);return t.length?t:this.parent().closest(e)},Cash.prototype.parents=function(e){return filtered(cash(unique(pluck(this,"parentElement",!0))),e)},Cash.prototype.prev=function(e,t){return filtered(cash(unique(pluck(this,"previousElementSibling",t))),e)},Cash.prototype.prevAll=function(e){return this.prev(e,!0)},Cash.prototype.siblings=function(e){var t=[];return this.each(function(e,n){push.apply(t,cash(n).parent().children(function(e,t){return t!==n}))}),filtered(cash(unique(t)),e)},module.exports=cash}()},function(e,t){e.exports='<div class="cyberus-key-widget"></div>\n\n<div class="cyberus-key-widget">\n  <button class="login-button">\n    <img src="{{widgetImageUrl}}" alt="Click to log in" />\n  </button>\n\n  <div class="lost-phone">\n    Lost your phone? <a class=\'lock-now-link\' href="#" target="_parent">Lock now</a>\n  </div>\n</div>'}])});